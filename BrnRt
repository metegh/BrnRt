-- === НАСТРОЙКИ ===
local FLY_SPEED = 4 -- скорость полёта
local KEY_TOGGLE_FLY = Enum.KeyCode.F

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- === NETLESS: отключаем физику и коллизии ===
for _, v in ipairs(character:GetDescendants()) do
    if v:IsA("BasePart") then
        v.CanCollide = false
        v.AssemblyLinearVelocity = Vector3.new(0, -25, 0)
        v.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
        task.spawn(function()
            while task.wait() do
                v.AssemblyLinearVelocity = Vector3.new(0, -25, 0)
            end
        end)
    end
end

-- === ПЕРЕМЕННЫЕ ===
local flying = false

-- === ФУНКЦИЯ ФЛАЯ НА CFrame (сквозь стены) ===
local function startFly()
    if flying then return end
    flying = true
    humanoid.PlatformStand = true

    while flying do
        local moveDir = Vector3.new()

        if UIS:IsKeyDown(Enum.KeyCode.W) then
            moveDir = moveDir + workspace.CurrentCamera.CFrame.LookVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.S) then
            moveDir = moveDir - workspace.CurrentCamera.CFrame.LookVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.A) then
            moveDir = moveDir - workspace.CurrentCamera.CFrame.RightVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.D) then
            moveDir = moveDir + workspace.CurrentCamera.CFrame.RightVector
        end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then
            moveDir = moveDir + Vector3.new(0,1,0)
        end
        if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then
            moveDir = moveDir - Vector3.new(0,1,0)
        end

        if moveDir.Magnitude > 0 then
            hrp.CFrame = hrp.CFrame + moveDir.Unit * FLY_SPEED
        end
        task.wait()
    end
end

local function stopFly()
    flying = false
    humanoid.PlatformStand = false
end

-- === КОНТРОЛ ===
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == KEY_TOGGLE_FLY then
        if flying then
            stopFly()
        else
            startFly()
        end
    end
end)

print("[✅] Флай через стены загружен! Нажми F для включения.")
